import{_ as a,c as s,o as n,a5 as i}from"./chunks/framework.CgT1UzWm.js";const h=JSON.parse('{"title":"BUFFER_ROWS Annotation","titleTemplate":"NpgsqlRest","description":"Configure row buffering for PostgreSQL REST API responses. Control memory usage and streaming behavior for large result sets.","frontmatter":{"outline":[2,3],"title":"BUFFER_ROWS Annotation","titleTemplate":"NpgsqlRest","description":"Configure row buffering for PostgreSQL REST API responses. Control memory usage and streaming behavior for large result sets.","head":[["meta",{"name":"keywords","content":"npgsqlrest buffer rows, response buffering, streaming results, large result sets, memory optimization"}],["meta",{"property":"og:title","content":"NpgsqlRest BUFFER_ROWS Annotation"}],["meta",{"property":"og:description","content":"Configure row buffering for controlling memory usage and streaming."}],["meta",{"property":"og:type","content":"article"}]]},"headers":[],"relativePath":"annotations/buffer-rows.md","filePath":"annotations/buffer-rows.md"}'),t={name:"annotations/buffer-rows.md"};function r(l,e,o,p,d,u){return n(),s("div",null,e[0]||(e[0]=[i(`<h1 id="buffer-rows" tabindex="-1">BUFFER_ROWS <a class="header-anchor" href="#buffer-rows" aria-label="Permalink to &quot;BUFFER_ROWS&quot;">​</a></h1><div class="info custom-block"><p class="custom-block-title">Also known as</p><p><code>buffer</code> (with or without <code>@</code> prefix)</p></div><p>Set the number of rows to buffer in the string builder before sending the response.</p><h2 id="syntax" tabindex="-1">Syntax <a class="header-anchor" href="#syntax" aria-label="Permalink to &quot;Syntax&quot;">​</a></h2><details class="code-collapsible" open><summary>code</summary><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>@buffer_rows &lt;count&gt;</span></span>
<span class="line"><span>@buffer &lt;count&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></details><p>Or using custom parameter syntax:</p><details class="code-collapsible" open><summary>code</summary><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>@buffer_rows = &lt;count&gt;</span></span>
<span class="line"><span>@buffer = &lt;count&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></details><h2 id="default-value" tabindex="-1">Default Value <a class="header-anchor" href="#default-value" aria-label="Permalink to &quot;Default Value&quot;">​</a></h2><p>The default value is <code>25</code> rows.</p><h2 id="special-values" tabindex="-1">Special Values <a class="header-anchor" href="#special-values" aria-label="Permalink to &quot;Special Values&quot;">​</a></h2><div class="table-container"><div class="table-wrapper"><table tabindex="0"><thead><tr><th>Value</th><th>Behavior</th></tr></thead><tbody><tr><td><code>0</code></td><td>Disable buffering - write response for each row</td></tr><tr><td><code>1</code></td><td>Buffer the entire array (all rows)</td></tr><tr><td><code>25</code></td><td>Default - buffer 25 rows before writing</td></tr><tr><td><code>&gt; 1</code></td><td>Buffer specified number of rows before writing</td></tr></tbody></table></div></div><h2 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;Examples&quot;">​</a></h2><h3 id="disable-buffering" tabindex="-1">Disable Buffering <a class="header-anchor" href="#disable-buffering" aria-label="Permalink to &quot;Disable Buffering&quot;">​</a></h3><p>Write each row immediately to the response stream:</p><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function stream_live_data() is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@buffer_rows 0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><h3 id="buffer-entire-response" tabindex="-1">Buffer Entire Response <a class="header-anchor" href="#buffer-entire-response" aria-label="Permalink to &quot;Buffer Entire Response&quot;">​</a></h3><p>Wait for all rows before sending response:</p><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function get_small_dataset() is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@buffer 1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><h3 id="large-buffer-for-throughput" tabindex="-1">Large Buffer for Throughput <a class="header-anchor" href="#large-buffer-for-throughput" aria-label="Permalink to &quot;Large Buffer for Throughput&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function export_all_data() is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@buffer_rows 5000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><h3 id="small-buffer-for-memory-efficiency" tabindex="-1">Small Buffer for Memory Efficiency <a class="header-anchor" href="#small-buffer-for-memory-efficiency" aria-label="Permalink to &quot;Small Buffer for Memory Efficiency&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function stream_data() is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@buffer 100&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><h2 id="behavior" tabindex="-1">Behavior <a class="header-anchor" href="#behavior" aria-label="Permalink to &quot;Behavior&quot;">​</a></h2><ul><li>Controls how many rows are buffered in the string builder before writing to the response stream.</li><li>Applies to rows in JSON object arrays when returning records from the database.</li><li>Buffering is more efficient than writing to the response stream for each row.</li><li>Disabling buffering (<code>0</code>) can have a slight negative impact on performance.</li><li>Higher values can have a negative impact on memory usage, especially with large datasets.</li></ul><h2 id="performance-considerations" tabindex="-1">Performance Considerations <a class="header-anchor" href="#performance-considerations" aria-label="Permalink to &quot;Performance Considerations&quot;">​</a></h2><ul><li><strong>Low values (0-10)</strong>: Lower memory usage, more response stream writes, slight performance overhead.</li><li><strong>Default (25)</strong>: Balanced trade-off between memory and performance.</li><li><strong>High values (1000+)</strong>: Better throughput, higher memory usage per request.</li><li><strong>Value of 1</strong>: Entire result buffered before sending - best for small datasets where you want atomic responses.</li></ul><h2 id="related" tabindex="-1">Related <a class="header-anchor" href="#related" aria-label="Permalink to &quot;Related&quot;">​</a></h2><ul><li><a href="./../config/npgsqlrest.html">NpgsqlRest Options configuration</a> - Configure default buffer size</li><li><a href="./../guide/annotations.html">Comment Annotations Guide</a> - How annotations work</li><li><a href="./../guide/configuration.html">Configuration Guide</a> - How configuration works</li></ul><h2 id="related-annotations" tabindex="-1">Related Annotations <a class="header-anchor" href="#related-annotations" aria-label="Permalink to &quot;Related Annotations&quot;">​</a></h2><ul><li><a href="./command-timeout.html">COMMAND_TIMEOUT</a> - Set query timeout</li><li><a href="./raw.html">RAW</a> - Return raw text output</li></ul>`,30)]))}const f=a(t,[["render",r]]);export{h as __pageData,f as default};
