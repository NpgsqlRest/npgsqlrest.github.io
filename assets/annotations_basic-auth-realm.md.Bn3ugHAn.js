import{_ as s,c as e,o as i,a5 as n}from"./chunks/framework.CgT1UzWm.js";const u=JSON.parse('{"title":"BASIC_AUTH_REALM Annotation","titleTemplate":"NpgsqlRest","description":"Set HTTP Basic Authentication realm name for PostgreSQL REST API endpoints. Customize the authentication prompt.","frontmatter":{"outline":[2,3],"title":"BASIC_AUTH_REALM Annotation","titleTemplate":"NpgsqlRest","description":"Set HTTP Basic Authentication realm name for PostgreSQL REST API endpoints. Customize the authentication prompt.","head":[["meta",{"name":"keywords","content":"npgsqlrest basic auth realm, authentication realm, www-authenticate header, basic auth prompt"}],["meta",{"property":"og:title","content":"NpgsqlRest BASIC_AUTH_REALM Annotation"}],["meta",{"property":"og:description","content":"Set HTTP Basic Authentication realm name for the authentication prompt."}],["meta",{"property":"og:type","content":"article"}]]},"headers":[],"relativePath":"annotations/basic-auth-realm.md","filePath":"annotations/basic-auth-realm.md"}'),l={name:"annotations/basic-auth-realm.md"};function t(p,a,r,h,o,c){return i(),e("div",null,a[0]||(a[0]=[n(`<h1 id="basic-auth-realm" tabindex="-1">BASIC_AUTH_REALM <a class="header-anchor" href="#basic-auth-realm" aria-label="Permalink to &quot;BASIC_AUTH_REALM&quot;">​</a></h1><div class="info custom-block"><p class="custom-block-title">Also known as</p><p><code>basic_authentication_realm</code>, <code>realm</code> (with or without <code>@</code> prefix)</p></div><p>Set the HTTP Basic Authentication realm name.</p><h2 id="syntax" tabindex="-1">Syntax <a class="header-anchor" href="#syntax" aria-label="Permalink to &quot;Syntax&quot;">​</a></h2><details class="code-collapsible" open><summary>code</summary><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>@realm = &lt;realm-name&gt;</span></span>
<span class="line"><span>@basic_auth_realm = &lt;realm-name&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></details><ul><li><code>realm-name</code>: The realm name displayed in the browser&#39;s authentication dialog and included in the <code>WWW-Authenticate</code> response header.</li></ul><h2 id="default-value" tabindex="-1">Default Value <a class="header-anchor" href="#default-value" aria-label="Permalink to &quot;Default Value&quot;">​</a></h2><p>If not specified, the default realm is <code>NpgsqlRest</code>.</p><h2 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;Examples&quot;">​</a></h2><h3 id="set-realm-name" tabindex="-1">Set Realm Name <a class="header-anchor" href="#set-realm-name" aria-label="Permalink to &quot;Set Realm Name&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> protected_api</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">returns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> json</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">language</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> sql</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> atomic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;data&quot;: &quot;secret&quot;}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function protected_api() is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HTTP GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@basic_auth admin_user hashed_password_here</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@realm = MyApplication</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></details><p>When authentication fails, the response header will be:</p><details class="code-collapsible" open><summary>code</summary><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>WWW-Authenticate: Basic realm=&quot;MyApplication&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></details><h3 id="alternative-keyword" tabindex="-1">Alternative Keyword <a class="header-anchor" href="#alternative-keyword" aria-label="Permalink to &quot;Alternative Keyword&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function admin_area() is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HTTP GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@basic_auth admin hashed_password_here</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@basic_auth_realm = Admin Area</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details><h3 id="with-challenge-command" tabindex="-1">With Challenge Command <a class="header-anchor" href="#with-challenge-command" aria-label="Permalink to &quot;With Challenge Command&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> secure_endpoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    _user_claims </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">returns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">language</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> sql</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> atomic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _user_claims;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function secure_endpoint(json) is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@basic_auth</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@challenge_command = select * from validate_user($1, $2, $3, $4, $5)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@realm = SecureZone</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@user_params</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></details><p>The realm value (<code>SecureZone</code>) is passed as the 4th parameter (<code>$4</code>) to the challenge command.</p><h2 id="behavior" tabindex="-1">Behavior <a class="header-anchor" href="#behavior" aria-label="Permalink to &quot;Behavior&quot;">​</a></h2><ul><li>Sets the <code>realm</code> parameter in the <code>WWW-Authenticate</code> response header when authentication fails.</li><li>The realm helps browsers identify which set of credentials to use for a given protected resource.</li><li>Different realms can have different sets of valid credentials.</li><li>The realm name is displayed in browser authentication dialogs, helping users identify which credentials to enter.</li><li>When using <code>challenge_command</code>, the realm value is passed as the 4th parameter to the validation function.</li></ul><h2 id="realm-resolution-order" tabindex="-1">Realm Resolution Order <a class="header-anchor" href="#realm-resolution-order" aria-label="Permalink to &quot;Realm Resolution Order&quot;">​</a></h2><p>The realm is determined in the following order:</p><ol><li>Endpoint-specific <code>realm</code> annotation (highest priority)</li><li>Global <code>BasicAuth.Realm</code> configuration option</li><li>Default value: <code>NpgsqlRest</code></li></ol><h2 id="related" tabindex="-1">Related <a class="header-anchor" href="#related" aria-label="Permalink to &quot;Related&quot;">​</a></h2><ul><li><a href="./../config/authentication-options.html">Authentication Options configuration</a> - Configure global Basic Auth realm</li><li><a href="./../guide/annotations.html">Comment Annotations Guide</a> - How annotations work</li><li><a href="./../guide/configuration.html">Configuration Guide</a> - How configuration works</li></ul><h2 id="related-annotations" tabindex="-1">Related Annotations <a class="header-anchor" href="#related-annotations" aria-label="Permalink to &quot;Related Annotations&quot;">​</a></h2><ul><li><a href="./basic-auth.html">BASIC_AUTH</a> - Enable Basic Authentication</li><li><a href="./basic-auth-command.html">BASIC_AUTH_COMMAND</a> - Set validation function for custom authentication logic</li></ul>`,27)]))}const m=s(l,[["render",t]]);export{u as __pageData,m as default};
