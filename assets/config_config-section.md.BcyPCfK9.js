import{_ as a,c as e,o as n,a5 as i}from"./chunks/framework.CgT1UzWm.js";const u=JSON.parse('{"title":"Config Section","titleTemplate":"NpgsqlRest","description":"Configure how NpgsqlRest processes configuration files. Environment variables, .env files, and configuration key validation.","frontmatter":{"outline":[2,3],"title":"Config Section","titleTemplate":"NpgsqlRest","description":"Configure how NpgsqlRest processes configuration files. Environment variables, .env files, and configuration key validation.","head":[["meta",{"name":"keywords","content":"npgsqlrest config, environment variables, env file configuration, configuration debugging, appsettings processing"}],["meta",{"property":"og:title","content":"NpgsqlRest Config Section"}],["meta",{"property":"og:description","content":"Configure environment variables, .env files, and configuration processing."}],["meta",{"property":"og:type","content":"article"}]]},"headers":[],"relativePath":"config/config-section.md","filePath":"config/config-section.md"}'),t={name:"config/config-section.md"};function l(o,s,r,p,d,c){return n(),e("div",null,s[0]||(s[0]=[i(`<h1 id="config-section" tabindex="-1">Config Section <a class="header-anchor" href="#config-section" aria-label="Permalink to &quot;Config Section&quot;">​</a></h1><p>The <code>Config</code> section controls how the configuration file itself is processed.</p><details class="code-collapsible" open><summary>json</summary><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;AddEnvironmentVariables&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;ParseEnvironmentVariables&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;EnvFile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;ValidateConfigKeys&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Warning&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></details><h2 id="settings-reference" tabindex="-1">Settings Reference <a class="header-anchor" href="#settings-reference" aria-label="Permalink to &quot;Settings Reference&quot;">​</a></h2><div class="table-container"><div class="table-wrapper"><table tabindex="0"><thead><tr><th>Setting</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>AddEnvironmentVariables</code></td><td>bool</td><td><code>false</code></td><td>Allow environment variables to override configuration settings.</td></tr><tr><td><code>ParseEnvironmentVariables</code></td><td>bool</td><td><code>true</code></td><td>Parse <code>{ENV_VAR_NAME}</code> placeholders in config values and replace with environment variable values.</td></tr><tr><td><code>EnvFile</code></td><td>string</td><td><code>null</code></td><td>Path to a <code>.env</code> file for loading environment variables. See below.</td></tr><tr><td><code>ValidateConfigKeys</code></td><td>string</td><td><code>&quot;Warning&quot;</code></td><td>Validate configuration keys against known defaults at startup. See below.</td></tr></tbody></table></div></div><h2 id="environment-variable-override" tabindex="-1">Environment Variable Override <a class="header-anchor" href="#environment-variable-override" aria-label="Permalink to &quot;Environment Variable Override&quot;">​</a></h2><p>When <code>AddEnvironmentVariables</code> is <code>true</code>, environment variables can override any configuration setting. Use double underscores for nested keys:</p><details class="code-collapsible" open><summary>bash</summary><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Override ConnectionStrings.Default</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConnectionStrings__Default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Host=production-server;...&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Override NpgsqlRest.UrlPathPrefix</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NpgsqlRest__UrlPathPrefix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/v2/api&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details><h2 id="environment-variable-parsing" tabindex="-1">Environment Variable Parsing <a class="header-anchor" href="#environment-variable-parsing" aria-label="Permalink to &quot;Environment Variable Parsing&quot;">​</a></h2><p>When <code>ParseEnvironmentVariables</code> is <code>true</code> (default), you can use <code>{ENV_VAR}</code> syntax anywhere in configuration values:</p><details class="code-collapsible" open><summary>json</summary><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ConnectionStrings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Host={PGHOST};Port={PGPORT};Database={PGDATABASE};Username={PGUSER};Password={PGPASSWORD}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details><p>This allows sensitive values to be kept in environment variables rather than in the configuration file.</p><h2 id="loading-from-env-file" tabindex="-1">Loading from .env File <a class="header-anchor" href="#loading-from-env-file" aria-label="Permalink to &quot;Loading from .env File&quot;">​</a></h2><p>When <code>AddEnvironmentVariables</code> or <code>ParseEnvironmentVariables</code> is <code>true</code> and <code>EnvFile</code> is set, the application will load environment variables from the specified file:</p><details class="code-collapsible" open><summary>json</summary><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;AddEnvironmentVariables&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;ParseEnvironmentVariables&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;EnvFile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.env&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></details><p>The <code>.env</code> file format supports:</p><ul><li><code>KEY=VALUE</code> pairs (one per line)</li><li>Comments (lines starting with <code>#</code>)</li><li>Quoted values (both single and double quotes)</li></ul><p>Example <code>.env</code> file:</p><details class="code-collapsible" open><summary>code</summary><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Database connection settings</span></span>
<span class="line"><span>PGHOST=localhost</span></span>
<span class="line"><span>PGPORT=5432</span></span>
<span class="line"><span>PGDATABASE=example_db</span></span>
<span class="line"><span>PGUSER=postgres</span></span>
<span class="line"><span>PGPASSWORD=postgres</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></details><p>The variables are loaded into the environment and made available for configuration parsing with the <code>{ENV_VAR_NAME}</code> syntax.</p><h2 id="configuration-key-validation" tabindex="-1">Configuration Key Validation <a class="header-anchor" href="#configuration-key-validation" aria-label="Permalink to &quot;Configuration Key Validation&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">New in 3.8.0</p><p>Configuration key validation was added in version 3.8.0.</p></div><p>At startup, NpgsqlRest can validate all configuration keys in <code>appsettings.json</code> against the known defaults schema. This catches typos and unknown keys that would otherwise be silently ignored (e.g., <code>LogCommand</code> instead of <code>LogCommands</code>).</p><p>The <code>ValidateConfigKeys</code> setting has three modes:</p><div class="table-container"><div class="table-wrapper"><table tabindex="0"><thead><tr><th>Mode</th><th>Behavior</th></tr></thead><tbody><tr><td><code>&quot;Warning&quot;</code> (default)</td><td>Logs warnings for unknown keys, startup continues.</td></tr><tr><td><code>&quot;Error&quot;</code></td><td>Logs errors for unknown keys and exits the application.</td></tr><tr><td><code>&quot;Ignore&quot;</code></td><td>No validation is performed.</td></tr></tbody></table></div></div><details class="code-collapsible" open><summary>json</summary><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;ValidateConfigKeys&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Warning&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details><p>Example output:</p><details class="code-collapsible" open><summary>code</summary><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[12:34:56 WRN] Unknown configuration key: NpgsqlRest:KebabCaselUrls</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></details><p>Validation also covers the <code>Kestrel</code> section, checking against the known Kestrel schema including <code>Limits</code>, <code>Http2</code>, <code>Http3</code>, and top-level flags like <code>DisableStringReuse</code> and <code>AllowSynchronousIO</code>. User-defined endpoint and certificate names under <code>Endpoints</code> and <code>Certificates</code> remain open-ended and won&#39;t trigger warnings.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Use the <code>--config</code> CLI switch to inspect the current configuration with syntax highlighting, or <code>--validate</code> for a pre-flight check of configuration and database connectivity.</p></div><h2 id="related" tabindex="-1">Related <a class="header-anchor" href="#related" aria-label="Permalink to &quot;Related&quot;">​</a></h2><ul><li><a href="./../guide/annotations.html">Comment Annotations Guide</a> - How annotations work</li><li><a href="./../guide/configuration.html">Configuration Guide</a> - How configuration sources work</li></ul><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li><a href="./connection.html">Connection Settings</a> - Database connection strings</li><li><a href="./server.html">Server &amp; SSL</a> - Kestrel and HTTPS configuration</li></ul>`,34)]))}const k=a(t,[["render",l]]);export{u as __pageData,k as default};
