import{_ as a,c as n,o as e,a5 as i}from"./chunks/framework.CgT1UzWm.js";const u=JSON.parse('{"title":"TAGS Annotation","titleTemplate":"NpgsqlRest","description":"Apply annotations conditionally based on endpoint tags. Configure different settings for CRUD operations, volatility types, and custom tags.","frontmatter":{"outline":[2,3],"title":"TAGS Annotation","titleTemplate":"NpgsqlRest","description":"Apply annotations conditionally based on endpoint tags. Configure different settings for CRUD operations, volatility types, and custom tags.","head":[["meta",{"name":"keywords","content":"npgsqlrest tags, conditional annotations, crud tags, for keyword, endpoint tags, tag based configuration"}],["meta",{"property":"og:title","content":"NpgsqlRest TAGS Annotation"}],["meta",{"property":"og:description","content":"Apply annotations conditionally based on endpoint tags for CRUD operations and custom configurations."}],["meta",{"property":"og:type","content":"article"}]]},"headers":[],"relativePath":"annotations/tags.md","filePath":"annotations/tags.md"}'),t={name:"annotations/tags.md"};function l(o,s,p,r,d,c){return e(),n("div",null,s[0]||(s[0]=[i(`<h1 id="tags" tabindex="-1">TAGS <a class="header-anchor" href="#tags" aria-label="Permalink to &quot;TAGS&quot;">​</a></h1><div class="info custom-block"><p class="custom-block-title">Also known as</p><p><code>for</code>, <code>tag</code> (no <code>@</code> prefix for this annotation)</p></div><p>Apply subsequent annotations only when the endpoint has specific tags.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>Tags are automatically assigned to endpoints by different routine sources (functions, procedures, tables, views). The <code>for</code>/<code>tags</code> annotation allows you to conditionally apply annotations based on these tags.</p><p>This is useful for:</p><ul><li>Applying different configurations based on routine volatility (<code>volatile</code>, <code>stable</code>, <code>immutable</code>)</li><li>Customizing behavior for CRUD operations (<code>select</code>, <code>insert</code>, <code>update</code>, <code>delete</code>)</li><li>Environment-specific settings when combined with custom tags</li></ul><p>This annotation is essential when using <a href="./../config/crud.html">automatic CRUD endpoint generation</a> to apply different configurations to different CRUD operations on the same table.</p><h2 id="syntax" tabindex="-1">Syntax <a class="header-anchor" href="#syntax" aria-label="Permalink to &quot;Syntax&quot;">​</a></h2><details class="code-collapsible" open><summary>code</summary><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>for &lt;tag1&gt;, &lt;tag2&gt;, &lt;tag3&gt;, ...</span></span>
<span class="line"><span>tags &lt;tag1&gt;, &lt;tag2&gt;, &lt;tag3&gt;, ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></details><p>Space-separated lists are also valid: <code>for select update delete</code></p><p>Annotations following the <code>for</code>/<code>tags</code> line apply only when the endpoint has at least one of the specified tags.</p><h2 id="how-for-creates-annotation-scopes" tabindex="-1">How <code>for</code> Creates Annotation Scopes <a class="header-anchor" href="#how-for-creates-annotation-scopes" aria-label="Permalink to &quot;How \`for\` Creates Annotation Scopes&quot;">​</a></h2><p>The <code>for</code> keyword creates a <strong>scope</strong> - all annotations that follow apply only to endpoints matching those tags, until the next <code>for</code> line or the end of the comment.</p><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table orders is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HTTP</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for select                    -- Start scope for SELECT endpoints</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@allow_anonymous              -- Applied only to SELECT</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@cached                       -- Applied only to SELECT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for insert, update            -- Start new scope for INSERT and UPDATE</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@authorize                    -- Applied only to INSERT and UPDATE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for delete                    -- Start new scope for DELETE</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@authorize admin              -- Applied only to DELETE</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></details><p>This creates <strong>different configurations for each CRUD operation</strong> from a single table comment.</p><h2 id="automatic-tags-by-source" tabindex="-1">Automatic Tags by Source <a class="header-anchor" href="#automatic-tags-by-source" aria-label="Permalink to &quot;Automatic Tags by Source&quot;">​</a></h2><h3 id="function-or-procedure-source" tabindex="-1">Function or Procedure Source <a class="header-anchor" href="#function-or-procedure-source" aria-label="Permalink to &quot;Function or Procedure Source&quot;">​</a></h3><p>Tags are assigned based on routine volatility:</p><div class="table-container"><div class="table-wrapper"><table tabindex="0"><thead><tr><th>Tag</th><th>Description</th></tr></thead><tbody><tr><td><code>volatile</code></td><td>Functions declared as VOLATILE</td></tr><tr><td><code>stable</code></td><td>Functions declared as STABLE</td></tr><tr><td><code>immutable</code></td><td>Functions declared as IMMUTABLE</td></tr><tr><td><code>other</code></td><td>Procedures and other routines</td></tr></tbody></table></div></div><h3 id="table-or-view-crud-source" tabindex="-1">Table or View CRUD Source <a class="header-anchor" href="#table-or-view-crud-source" aria-label="Permalink to &quot;Table or View CRUD Source&quot;">​</a></h3><p>Different CRUD operations receive different tags:</p><div class="table-container"><div class="table-wrapper"><table tabindex="0"><thead><tr><th>Operation</th><th>Tags</th></tr></thead><tbody><tr><td><strong>Select</strong></td><td><code>select</code>, <code>read</code>, <code>get</code></td></tr><tr><td><strong>Insert</strong></td><td><code>insert</code>, <code>put</code>, <code>create</code></td></tr><tr><td><strong>Insert Returning</strong></td><td><code>insert</code>, <code>put</code>, <code>create</code>, <code>insert_returning</code>, <code>returning</code></td></tr><tr><td><strong>Insert On Conflict Do Nothing</strong></td><td><code>insert</code>, <code>put</code>, <code>create</code>, <code>insert_on_conflict_do_nothing</code>, <code>on_conflict_do_nothing</code>, <code>on_conflict</code></td></tr><tr><td><strong>Insert On Conflict Do Nothing Returning</strong></td><td><code>insert</code>, <code>put</code>, <code>create</code>, <code>insert_on_conflict_do_nothing_returning</code>, <code>on_conflict_do_nothing</code>, <code>on_conflict</code>, <code>returning</code></td></tr><tr><td><strong>Insert On Conflict Do Update</strong></td><td><code>insert</code>, <code>put</code>, <code>create</code>, <code>insert_on_conflict_do_update</code>, <code>on_conflict</code>, <code>on_conflict_do_update</code></td></tr><tr><td><strong>Insert On Conflict Do Update Returning</strong></td><td><code>insert</code>, <code>put</code>, <code>create</code>, <code>insert_on_conflict_do_update_returning</code>, <code>on_conflict_do_update</code>, <code>on_conflict</code>, <code>returning</code></td></tr><tr><td><strong>Update</strong></td><td><code>update</code>, <code>post</code></td></tr><tr><td><strong>Update Returning</strong></td><td><code>update</code>, <code>post</code>, <code>update_returning</code>, <code>returning</code></td></tr><tr><td><strong>Delete</strong></td><td><code>delete</code></td></tr><tr><td><strong>Delete Returning</strong></td><td><code>delete</code>, <code>delete_returning</code>, <code>returning</code></td></tr></tbody></table></div></div><h2 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;Examples&quot;">​</a></h2><h3 id="volatility-based-configuration" tabindex="-1">Volatility-Based Configuration <a class="header-anchor" href="#volatility-based-configuration" aria-label="Permalink to &quot;Volatility-Based Configuration&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Apply caching only to immutable functions</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function calculate_hash(_data text) is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for immutable</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@cached&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details><h3 id="crud-specific-authorization" tabindex="-1">CRUD-Specific Authorization <a class="header-anchor" href="#crud-specific-authorization" aria-label="Permalink to &quot;CRUD-Specific Authorization&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- On a table, require authorization only for write operations</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table products is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;for select</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@allow_anonymous</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for insert, update, delete</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@authorize admin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></details><h3 id="environment-specific-authorization" tabindex="-1">Environment-Specific Authorization <a class="header-anchor" href="#environment-specific-authorization" aria-label="Permalink to &quot;Environment-Specific Authorization&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function sensitive_data() is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for production</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@authorize admin</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for development</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@allow_anonymous&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></details><h3 id="tag-specific-paths" tabindex="-1">Tag-Specific Paths <a class="header-anchor" href="#tag-specific-paths" aria-label="Permalink to &quot;Tag-Specific Paths&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function get_users() is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for v1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@path /api/v1/users</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for v2</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@path /api/v2/users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></details><h3 id="multiple-tags" tabindex="-1">Multiple Tags <a class="header-anchor" href="#multiple-tags" aria-label="Permalink to &quot;Multiple Tags&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Apply rate limiting to all volatile operations</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function api_call() is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@for volatile, insert, update, delete</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@rate_limiter_policy strict&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details><h2 id="crud-endpoint-control-with-tags" tabindex="-1">CRUD Endpoint Control with Tags <a class="header-anchor" href="#crud-endpoint-control-with-tags" aria-label="Permalink to &quot;CRUD Endpoint Control with Tags&quot;">​</a></h2><p>When using CRUD source with <code>&quot;CommentsMode&quot;: &quot;ParseAll&quot;</code>, use tags to apply different configurations to different CRUD operations on the same table.</p><h3 id="custom-path-for-select-authorization-for-update" tabindex="-1">Custom Path for SELECT, Authorization for UPDATE <a class="header-anchor" href="#custom-path-for-select-authorization-for-update" aria-label="Permalink to &quot;Custom Path for SELECT, Authorization for UPDATE&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> crud_commented_table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> primary key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table crud_commented_table is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;This is a commented table</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for select</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HTTP GET /select_commented_table</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@for update</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@authorize</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@for returning</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@for insert_on_conflict_do_update, insert_on_conflict_do_nothing  -- CSV format</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></details><p>This configuration:</p><ul><li>Custom path <code>/select_commented_table</code> for SELECT (instead of default <code>/api/crud-commented-table/</code>)</li><li>Requires authorization for UPDATE operations</li><li>Disables all RETURNING variants</li><li>Disables all ON CONFLICT operations</li></ul><p>Results:</p><ul><li><code>GET /api/crud-commented-table/</code> → 405 Method Not Allowed (default path disabled)</li><li><code>GET /select_commented_table/</code> → 200 OK (custom path)</li><li><code>POST /api/crud-commented-table/</code> → 401 Unauthorized (requires auth)</li><li><code>DELETE /api/crud-commented-table/returning/</code> → 404 Not Found (returning disabled)</li><li><code>PUT /api/crud-commented-table/on-conflict-do-update/</code> → 404 Not Found (on conflict disabled)</li></ul><h3 id="enable-only-on-conflict-operations" tabindex="-1">Enable Only ON CONFLICT Operations <a class="header-anchor" href="#enable-only-on-conflict-operations" aria-label="Permalink to &quot;Enable Only ON CONFLICT Operations&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> crud_on_conflict_only</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> primary key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table crud_on_conflict_only is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HTTP</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@for on_conflict</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@enabled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></details><p>The <code>on_conflict</code> tag matches all ON CONFLICT operations, enabling only upsert endpoints while keeping standard CRUD disabled.</p><h2 id="two-approaches-for-scopes-vs-inline-tags" tabindex="-1">Two Approaches: <code>for</code> Scopes vs Inline Tags <a class="header-anchor" href="#two-approaches-for-scopes-vs-inline-tags" aria-label="Permalink to &quot;Two Approaches: \`for\` Scopes vs Inline Tags&quot;">​</a></h2><p>There are two ways to apply tag-based annotations:</p><h3 id="approach-1-using-for-scopes" tabindex="-1">Approach 1: Using <code>for</code> Scopes <a class="header-anchor" href="#approach-1-using-for-scopes" aria-label="Permalink to &quot;Approach 1: Using \`for\` Scopes&quot;">​</a></h3><p>Use <code>for</code> to create a scope where multiple annotations apply:</p><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table products is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@for select</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@allow_anonymous</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@cached</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@timeout 5000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for insert, update, delete</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@authorize</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></details><h3 id="approach-2-using-inline-tags-with-disabled-enabled" tabindex="-1">Approach 2: Using Inline Tags with <code>disabled</code>/<code>enabled</code> <a class="header-anchor" href="#approach-2-using-inline-tags-with-disabled-enabled" aria-label="Permalink to &quot;Approach 2: Using Inline Tags with \`disabled\`/\`enabled\`&quot;">​</a></h3><p>Use tags directly with <code>disabled</code> or <code>enabled</code> for simpler cases:</p><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table products is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled returning              -- Disable all RETURNING endpoints</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled on_conflict            -- Disable all ON CONFLICT endpoints</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></details><p>Both approaches can be combined:</p><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table products is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled                        -- Disable everything first</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@enabled select, delete          -- Re-enable only SELECT and DELETE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for select                      -- Then customize SELECT</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@cached</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></details><h2 id="behavior" tabindex="-1">Behavior <a class="header-anchor" href="#behavior" aria-label="Permalink to &quot;Behavior&quot;">​</a></h2><ul><li>Annotations after <code>for</code>/<code>tags</code> apply until the next <code>for</code>/<code>tags</code> line or end of comment</li><li>If an endpoint matches any of the specified tags, the annotations are applied</li><li>Tags are case-insensitive</li><li>Multiple <code>for</code>/<code>tags</code> blocks can be used in the same comment</li><li>Custom tags can be defined in addition to automatic tags</li><li>Comma-separated tags work the same as space-separated: <code>for select, update</code> equals <code>for select update</code></li></ul><h2 id="related" tabindex="-1">Related <a class="header-anchor" href="#related" aria-label="Permalink to &quot;Related&quot;">​</a></h2><ul><li><a href="./../config/crud.html">CRUD Source configuration</a> - Configure automatic CRUD endpoint generation</li><li><a href="./../config/openapi.html">OpenAPI configuration</a> - Tags are used in OpenAPI grouping</li><li><a href="./../guide/annotations.html">Comment Annotations Guide</a> - How annotations work</li><li><a href="./../guide/configuration.html">Configuration Guide</a> - How configuration works</li></ul><h2 id="related-annotations" tabindex="-1">Related Annotations <a class="header-anchor" href="#related-annotations" aria-label="Permalink to &quot;Related Annotations&quot;">​</a></h2><ul><li><a href="./enabled.html">ENABLED</a> - Enable for specific tags</li><li><a href="./disabled.html">DISABLED</a> - Disable for specific tags</li></ul>`,61)]))}const b=a(t,[["render",l]]);export{u as __pageData,b as default};
