import{_ as s,c as a,o as n,a5 as t}from"./chunks/framework.CgT1UzWm.js";const u=JSON.parse('{"title":"REQUEST_HEADERS_MODE Annotation","titleTemplate":"NpgsqlRest","description":"Control how HTTP request headers are passed to PostgreSQL functions. Access headers via context or parameters.","frontmatter":{"outline":[2,3],"title":"REQUEST_HEADERS_MODE Annotation","titleTemplate":"NpgsqlRest","description":"Control how HTTP request headers are passed to PostgreSQL functions. Access headers via context or parameters.","head":[["meta",{"name":"keywords","content":"npgsqlrest request headers, http headers postgresql, access request headers, headers to function, header mode"}],["meta",{"property":"og:title","content":"NpgsqlRest REQUEST_HEADERS_MODE Annotation"}],["meta",{"property":"og:description","content":"Control how HTTP request headers are passed to PostgreSQL functions."}],["meta",{"property":"og:type","content":"article"}]]},"headers":[],"relativePath":"annotations/request-headers-mode.md","filePath":"annotations/request-headers-mode.md"}'),i={name:"annotations/request-headers-mode.md"};function r(l,e,o,d,p,h){return n(),a("div",null,e[0]||(e[0]=[t(`<h1 id="request-headers-mode" tabindex="-1">REQUEST_HEADERS_MODE <a class="header-anchor" href="#request-headers-mode" aria-label="Permalink to &quot;REQUEST_HEADERS_MODE&quot;">​</a></h1><div class="info custom-block"><p class="custom-block-title">Also known as</p><p><code>request_headers</code> (with or without <code>@</code> prefix)</p></div><p>Control how HTTP request headers are passed to the PostgreSQL function.</p><h2 id="syntax" tabindex="-1">Syntax <a class="header-anchor" href="#syntax" aria-label="Permalink to &quot;Syntax&quot;">​</a></h2><details class="code-collapsible" open><summary>code</summary><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>@request_headers_mode &lt;mode&gt;</span></span>
<span class="line"><span>@request_headers &lt;mode&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></details><h2 id="values" tabindex="-1">Values <a class="header-anchor" href="#values" aria-label="Permalink to &quot;Values&quot;">​</a></h2><div class="table-container"><div class="table-wrapper"><table tabindex="0"><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>ignore</code></td><td>Don&#39;t pass request headers to the function</td></tr><tr><td><code>context</code></td><td>Set headers as PostgreSQL context variable via <code>set_config()</code></td></tr><tr><td><code>parameter</code></td><td>Pass headers to a function parameter as JSON</td></tr></tbody></table></div></div><h2 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;Examples&quot;">​</a></h2><h3 id="ignore-headers" tabindex="-1">Ignore Headers <a class="header-anchor" href="#ignore-headers" aria-label="Permalink to &quot;Ignore Headers&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function simple_func() is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@request_headers_mode ignore&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><h3 id="pass-as-context-variable" tabindex="-1">Pass as Context Variable <a class="header-anchor" href="#pass-as-context-variable" aria-label="Permalink to &quot;Pass as Context Variable&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function context_aware_func() is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@request_headers_mode context&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><p>Headers accessible via: <code>current_setting(&#39;request.headers&#39;, true)</code></p><h3 id="pass-as-parameter" tabindex="-1">Pass as Parameter <a class="header-anchor" href="#pass-as-parameter" aria-label="Permalink to &quot;Pass as Parameter&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> with_headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(_data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, _headers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">returns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> json</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">language</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> sql</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> atomic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">...;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function with_headers(text, json) is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@request_headers_mode parameter&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></details><h2 id="behavior" tabindex="-1">Behavior <a class="header-anchor" href="#behavior" aria-label="Permalink to &quot;Behavior&quot;">​</a></h2><ul><li>Default mode is configured in <code>NpgsqlRest.RequestHeadersMode</code></li><li><code>context</code> mode uses the key from <code>RequestHeadersContextKey</code> setting</li><li><code>parameter</code> mode uses the parameter name from <code>RequestHeadersParameterName</code> setting</li></ul><h2 id="related" tabindex="-1">Related <a class="header-anchor" href="#related" aria-label="Permalink to &quot;Related&quot;">​</a></h2><ul><li><a href="./../config/npgsqlrest.html">NpgsqlRest Options configuration</a> - Configure default request headers mode</li><li><a href="./../guide/annotations.html">Comment Annotations Guide</a> - How annotations work</li><li><a href="./../guide/configuration.html">Configuration Guide</a> - How configuration works</li></ul><h2 id="related-annotations" tabindex="-1">Related Annotations <a class="header-anchor" href="#related-annotations" aria-label="Permalink to &quot;Related Annotations&quot;">​</a></h2><ul><li><a href="./request-headers-parameter-name.html">REQUEST_HEADERS_PARAMETER_NAME</a> - Set parameter name</li></ul>`,21)]))}const m=s(i,[["render",r]]);export{u as __pageData,m as default};
