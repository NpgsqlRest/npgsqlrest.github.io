import{_ as a,c as i,o as e,a5 as n}from"./chunks/framework.CgT1UzWm.js";const b=JSON.parse('{"title":"DISABLED Annotation","titleTemplate":"NpgsqlRest","description":"Disable PostgreSQL REST API endpoints globally or conditionally by tags. Control which CRUD operations are exposed for tables and views.","frontmatter":{"outline":[2,3],"title":"DISABLED Annotation","titleTemplate":"NpgsqlRest","description":"Disable PostgreSQL REST API endpoints globally or conditionally by tags. Control which CRUD operations are exposed for tables and views.","head":[["meta",{"name":"keywords","content":"npgsqlrest disabled, disable endpoint, hide api endpoint, conditional disable, crud operation control"}],["meta",{"property":"og:title","content":"NpgsqlRest DISABLED Annotation"}],["meta",{"property":"og:description","content":"Disable REST API endpoints globally or conditionally by tags for tables and views."}],["meta",{"property":"og:type","content":"article"}]]},"headers":[],"relativePath":"annotations/disabled.md","filePath":"annotations/disabled.md"}'),l={name:"annotations/disabled.md"};function t(p,s,r,d,o,h){return e(),i("div",null,s[0]||(s[0]=[n(`<h1 id="disabled" tabindex="-1">DISABLED <a class="header-anchor" href="#disabled" aria-label="Permalink to &quot;DISABLED&quot;">​</a></h1><p>Disable endpoint globally or conditionally based on tags.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>This annotation prevents an endpoint from being created. Use it to:</p><ul><li>Completely disable an endpoint</li><li>Conditionally disable an endpoint based on routine volatility or CRUD operation type</li><li>Hide internal functions that shouldn&#39;t be exposed as HTTP endpoints</li><li>Control which CRUD operations are exposed for tables and views</li></ul><p>Tags are automatically assigned based on routine source (function volatility, CRUD operation type). See <a href="./tags.html">TAGS</a> for the complete list of automatic tags.</p><p>This annotation is particularly useful with <a href="./../config/crud.html">automatic CRUD endpoint generation</a> to control which operations are exposed for tables and views.</p><h2 id="keywords" tabindex="-1">Keywords <a class="header-anchor" href="#keywords" aria-label="Permalink to &quot;Keywords&quot;">​</a></h2><p><code>@disabled</code>, <code>disabled</code></p><h2 id="syntax" tabindex="-1">Syntax <a class="header-anchor" href="#syntax" aria-label="Permalink to &quot;Syntax&quot;">​</a></h2><details class="code-collapsible" open><summary>code</summary><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>@disabled</span></span>
<span class="line"><span>@disabled &lt;tag1&gt;, &lt;tag2&gt;, &lt;tag3&gt;, ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></details><p>Space-separated lists are also valid: <code>@disabled insert update delete</code></p><ul><li>Without tags: Disables the endpoint unconditionally</li><li>With tags: Disables the endpoint only when it has at least one of the specified tags</li></ul><h2 id="understanding-disabled-with-tags" tabindex="-1">Understanding <code>disabled</code> with Tags <a class="header-anchor" href="#understanding-disabled-with-tags" aria-label="Permalink to &quot;Understanding \`disabled\` with Tags&quot;">​</a></h2><p>When you use <code>disabled</code> with tags, it only disables endpoints that have <strong>at least one</strong> of the specified tags:</p><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Disable only INSERT operations (all variants)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@disabled </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">insert</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Disable only RETURNING variants (insert_returning, update_returning, delete_returning)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@disabled returning</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Disable only ON CONFLICT variants (upsert operations)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@disabled on_conflict</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Disable multiple operation types</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@disabled </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">delete</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></details><h3 id="tag-hierarchy-for-crud-operations" tabindex="-1">Tag Hierarchy for CRUD Operations <a class="header-anchor" href="#tag-hierarchy-for-crud-operations" aria-label="Permalink to &quot;Tag Hierarchy for CRUD Operations&quot;">​</a></h3><p>Tags are hierarchical - broader tags match multiple operations:</p><div class="table-container"><div class="table-wrapper"><table tabindex="0"><thead><tr><th>Tag</th><th>Matches</th></tr></thead><tbody><tr><td><code>returning</code></td><td>insert_returning, update_returning, delete_returning, on_conflict_do_nothing_returning, on_conflict_do_update_returning</td></tr><tr><td><code>on_conflict</code></td><td>on_conflict_do_nothing, on_conflict_do_update (and their returning variants)</td></tr><tr><td><code>insert</code></td><td>insert, insert_returning, all on_conflict variants</td></tr><tr><td><code>update</code></td><td>update, update_returning</td></tr><tr><td><code>delete</code></td><td>delete, delete_returning</td></tr></tbody></table></div></div><h2 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;Examples&quot;">​</a></h2><h3 id="disable-globally" tabindex="-1">Disable Globally <a class="header-anchor" href="#disable-globally" aria-label="Permalink to &quot;Disable Globally&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function deprecated_func() is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><p>The function will not be exposed as an HTTP endpoint.</p><h3 id="disable-volatile-functions" tabindex="-1">Disable Volatile Functions <a class="header-anchor" href="#disable-volatile-functions" aria-label="Permalink to &quot;Disable Volatile Functions&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Disable endpoint for volatile functions (side effects)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function dangerous_operation() is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP POST</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled volatile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></details><h3 id="disable-write-operations-on-a-table" tabindex="-1">Disable Write Operations on a Table <a class="header-anchor" href="#disable-write-operations-on-a-table" aria-label="Permalink to &quot;Disable Write Operations on a Table&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Make table read-only via API</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table reference_data is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@disabled insert, update, delete&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><p>This disables INSERT, UPDATE, and DELETE endpoints, keeping only SELECT.</p><h3 id="disable-for-production" tabindex="-1">Disable for Production <a class="header-anchor" href="#disable-for-production" aria-label="Permalink to &quot;Disable for Production&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function admin_debug() is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled production&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><p>Endpoint is disabled when the routine has <code>production</code> tag but available in other environments.</p><h3 id="selective-disable-with-re-enable" tabindex="-1">Selective Disable with Re-enable <a class="header-anchor" href="#selective-disable-with-re-enable" aria-label="Permalink to &quot;Selective Disable with Re-enable&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on function internal_api() is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HTTP GET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@enabled immutable&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></details><p>Disables by default, but re-enables for immutable functions only.</p><h3 id="disable-returning-variants" tabindex="-1">Disable Returning Variants <a class="header-anchor" href="#disable-returning-variants" aria-label="Permalink to &quot;Disable Returning Variants&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Disable all RETURNING variants for simpler API</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table orders is</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@disabled returning&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><p>This disables all CRUD operations that return data (insert returning, update returning, delete returning).</p><h2 id="crud-endpoint-control" tabindex="-1">CRUD Endpoint Control <a class="header-anchor" href="#crud-endpoint-control" aria-label="Permalink to &quot;CRUD Endpoint Control&quot;">​</a></h2><p>When using CRUD source with <code>&quot;CommentsMode&quot;: &quot;ParseAll&quot;</code>, you can use <code>disabled</code> and <code>enabled</code> annotations together to precisely control which CRUD operations are exposed.</p><h3 id="disable-all-enable-specific-operations" tabindex="-1">Disable All, Enable Specific Operations <a class="header-anchor" href="#disable-all-enable-specific-operations" aria-label="Permalink to &quot;Disable All, Enable Specific Operations&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> crud_select_only</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> primary key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table crud_select_only is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@enabled select, delete</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></details><p>This table will only have SELECT and DELETE endpoints. All other operations (INSERT, UPDATE, and their variants) return 405 Method Not Allowed.</p><h3 id="disable-specific-operation-groups-using-tags" tabindex="-1">Disable Specific Operation Groups Using Tags <a class="header-anchor" href="#disable-specific-operation-groups-using-tags" aria-label="Permalink to &quot;Disable Specific Operation Groups Using Tags&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> crud_commented_table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> primary key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table crud_commented_table is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for returning</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@for insert_on_conflict_do_update, insert_on_conflict_do_nothing</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></details><p>This disables:</p><ul><li>All RETURNING variants (insert returning, update returning, delete returning)</li><li>All ON CONFLICT operations (upsert variants)</li></ul><h3 id="disable-all-enable-only-on-conflict-operations" tabindex="-1">Disable All, Enable Only ON CONFLICT Operations <a class="header-anchor" href="#disable-all-enable-only-on-conflict-operations" aria-label="Permalink to &quot;Disable All, Enable Only ON CONFLICT Operations&quot;">​</a></h3><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> crud_on_conflict_only</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> primary key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table crud_on_conflict_only is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HTTP</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@for on_conflict</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@enabled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></details><p>This disables all standard CRUD endpoints but enables only the ON CONFLICT variants (upsert operations).</p><h2 id="real-world-use-cases" tabindex="-1">Real-World Use Cases <a class="header-anchor" href="#real-world-use-cases" aria-label="Permalink to &quot;Real-World Use Cases&quot;">​</a></h2><h3 id="read-only-api-table" tabindex="-1">Read-Only API Table <a class="header-anchor" href="#read-only-api-table" aria-label="Permalink to &quot;Read-Only API Table&quot;">​</a></h3><p>Expose data for reading but prevent any modifications:</p><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table reference_data is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled insert, update, delete</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><p>Only <code>GET /api/reference-data/</code> works. All write operations return 405 Method Not Allowed.</p><h3 id="audit-log-append-only" tabindex="-1">Audit Log (Append-Only) <a class="header-anchor" href="#audit-log-append-only" aria-label="Permalink to &quot;Audit Log (Append-Only)&quot;">​</a></h3><p>Allow inserting audit records but prevent updates and deletes:</p><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table audit_log is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled update, delete</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><h3 id="simplified-api-no-returning-variants" tabindex="-1">Simplified API (No RETURNING Variants) <a class="header-anchor" href="#simplified-api-no-returning-variants" aria-label="Permalink to &quot;Simplified API (No RETURNING Variants)&quot;">​</a></h3><p>Keep the API surface small by disabling RETURNING endpoints:</p><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table orders is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled returning</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><p>This removes <code>/api/orders/returning/</code> endpoints, clients use standard endpoints and fetch data separately if needed.</p><h3 id="upsert-only-table-idempotent-api" tabindex="-1">Upsert-Only Table (Idempotent API) <a class="header-anchor" href="#upsert-only-table-idempotent-api" aria-label="Permalink to &quot;Upsert-Only Table (Idempotent API)&quot;">​</a></h3><p>For idempotent APIs where clients should only use upsert:</p><details class="code-collapsible" open><summary>sql</summary><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comment on table sync_state is </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@disabled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@for on_conflict</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@enabled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details><p>Only <code>PUT /api/sync-state/on-conflict-do-update/</code> works - perfect for sync/state endpoints.</p><h2 id="behavior" tabindex="-1">Behavior <a class="header-anchor" href="#behavior" aria-label="Permalink to &quot;Behavior&quot;">​</a></h2><ul><li>When used without tags, unconditionally disables the endpoint</li><li>When used with tags, disables only if the endpoint has at least one matching tag</li><li>Can be combined with <code>enabled</code> to create complex enable/disable logic</li><li>Tags include automatic tags from routine source (volatility, CRUD type) and custom tags</li><li>Case-insensitive tag matching</li><li>Comma-separated tags work the same as space-separated: <code>disabled insert, update</code> equals <code>disabled insert update</code></li></ul><h2 id="related" tabindex="-1">Related <a class="header-anchor" href="#related" aria-label="Permalink to &quot;Related&quot;">​</a></h2><ul><li><a href="./../config/crud.html">CRUD Source configuration</a> - Configure automatic CRUD endpoint generation</li><li><a href="./../guide/annotations.html">Comment Annotations Guide</a> - How annotations work</li><li><a href="./../guide/configuration.html">Configuration Guide</a> - How configuration works</li></ul><h2 id="related-annotations" tabindex="-1">Related Annotations <a class="header-anchor" href="#related-annotations" aria-label="Permalink to &quot;Related Annotations&quot;">​</a></h2><ul><li><a href="./enabled.html">ENABLED</a> - Enable endpoint globally or by tags</li><li><a href="./tags.html">TAGS</a> - Automatic tags and conditional annotation application</li></ul>`,71)]))}const u=a(l,[["render",t]]);export{b as __pageData,u as default};
